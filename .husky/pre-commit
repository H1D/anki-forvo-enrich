#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

if command -v gitleaks >/dev/null 2>&1; then
  echo "Running gitleaks pre-commit scan..."
  gitleaks protect --staged --no-banner || {
    echo "Gitleaks detected potential secrets. Commit aborted." >&2
    exit 1
  }
else
  echo "gitleaks not found; skipping secret scan"
fi
